---
import BaseLayout from '../components/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Hero from '../components/Hero.astro';
import CTA from '../components/CTA.astro';
import { SERVICES, SITE_CONFIG, WHATSAPP_MESSAGES } from '../utils/constants.js';
import { generateMetaTags, generateServiceSchema, generateBreadcrumbSchema, generateFAQSchema } from '../utils/seo.ts';

const service = SERVICES.find(s => s.slug === 'jasa-laser-fiber');
if (!service) { throw new Error(`Service with slug 'jasa-laser-fiber' not found.`); }

const metaTags = generateMetaTags({
  title: `${service.name} - Presisi Tinggi untuk Material Metal`,
  description: `${service.description}. Teknologi laser fiber tercepat & akurat untuk cutting stainless steel, carbon steel, aluminium hingga ketebalan 20mm. Quote gratis 24 jam.`,
  keywords: service.keywords,
  url: `/${service.slug}/`,
  type: "service",
  image: service.image,
  publishedTime: "2025-01-01T00:00:00Z",
  modifiedTime: "2025-01-01T00:00:00Z",
  author: SITE_CONFIG.author
});

const serviceSchema = generateServiceSchema({ name: service.name, description: service.description, price: "Competitive pricing" });
const breadcrumbSchema = generateBreadcrumbSchema([
  { name: 'Beranda', url: '/' },
  { name: 'Layanan', url: '/#services' },
  { name: service.name, url: `/${service.slug}/` }
]);

// FAQ schema khusus layanan (tanpa mengubah UI)
const faqItems = [
  { question: "Material logam apa saja yang bisa diproses?", answer: "Stainless steel, carbon steel, aluminium, tembaga, brass, titanium." },
  { question: "Berapa toleransi presisi?", answer: "Hingga Â±0.05mm tergantung material dan ketebalan." },
  { question: "Maksimal ketebalan berapa?", answer: "Hingga 20mm untuk stainless/carbon steel, 15mm untuk aluminium." }
];
const faqSchema = generateFAQSchema(faqItems);
---
<BaseLayout metaTags={metaTags} jsonLd={[serviceSchema, breadcrumbSchema, faqSchema]}>
  <Header slot="header" />

  <Hero
    title={`${service.name} Profesional`}
    subtitle="Cutting & Marking Metal | Presisi Tinggi | Stainless, Alumunium"
    description="Teknologi laser fiber tercepat dan paling akurat untuk cutting serta marking berbagai jenis material logam. Ideal untuk stainless steel, carbon steel, aluminium, dan tembaga dengan hasil presisi tinggi dan efisiensi biaya maksimal."
    primaryCTA="Konsultasi Laser Fiber"
    secondaryCTA="Lihat Portofolio"
    backgroundImage={service.image}
    whatsappMessage={WHATSAPP_MESSAGES.fiber}
  />

  <!-- Service Overview -->
  <section class="section-padding bg-background">
    <div class="container-custom">
      <div class="grid lg:grid-cols-2 gap-12 items-center">
        <div class="order-2 lg:order-1">
          <img
            src={service.image}
            alt={service.name}
            class="rounded-xl shadow-xl w-full"
            loading="lazy"
            decoding="async"
            width="800"
            height="533"
            sizes="(max-width: 1024px) 100vw, 800px"
          />
        </div>
        <div class="order-1 lg:order-2">
          <h2 class="heading-lg text-text-main mb-6">Solusi Cutting & Marking Logam Terdepan</h2>
          <p class="text-xl text-text-secondary mb-8">
            Laser Fiber kami menggunakan teknologi berkekuatan tinggi untuk memberikan hasil cutting dan marking yang sangat presisi pada berbagai material logam. Dengan kecepatan tinggi dan efisiensi biaya, kami menjadi pilihan utama industri manufaktur dan otomotif di Jabodetabek.
          </p>
          <!-- details remain unchanged -->
        </div>
      </div>
    </div>
  </section>

  <CTA />
  <Footer slot="footer" />
</BaseLayout>